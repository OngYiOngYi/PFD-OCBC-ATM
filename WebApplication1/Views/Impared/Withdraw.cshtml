@{
    ViewData["Title"] = "Withdraw";
}

<!DOCTYPE html>
<html>
<head>
    <title>Withdraw</title>
    <style>
        .mains {
            display: flex;
            flex-direction:column;
            align-items: center;
            justify-content: center;
            height: 55vh;
            margin: 0;
        }

        header {
            text-align: center;
        }
        .input-group{
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
        }
        .input-group form {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-gap: 10px; /* Adjust the gap as needed */
            text-align: center;
        }

        button[type="button"] {
            padding: 30px 60px; /* Increased padding */
            margin: 10px; /* Increased margin */
            border: 2px solid #3498db;
            background-color: #3498db;
            color: #fff;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
        }

        button[type="button"]:hover {
            background-color: #2980b9;
        }

        .withdraw,
        .withdrawtext,
        .message {
            font-family: 'Comfortaa', sans-serif;
        }

        .lottie-container {
            display: none;
        }

    </style>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@600&family=Merriweather:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.8/lottie.min.js"></script>
</head>
<body>
    <div class="mains">
        <header>
            <h1 class="withdraw">Withdraw</h1>
        </header>

        <div class="withdrawtext">
            Please choose an amount to withdraw...
        </div>

        
        <div>
            <textarea id="result" rows="8" cols="80"></textarea> <br>
            <button id="start">Start</button>
            <button id="stop">Stop</button>
            <button id="submit">Submit</button>
        </div>

        <div class="message" id="withdrawmessage">
            <!-- Your success and error message display here -->
        </div>

    <script type="text/javascript">
        //var startButton = document.getElementById('start');
        //var stopButton = document.getElementById('stop');
        //var resultElement = document.getElementById('result');

        //var recognition = new webkitSpeechRecognition();

        //recognition.lang = window.navigator.language;
        //recognition.interimResults = true;

        //startButton.addEventListener('click', () => { recognition.start(); });
        //stopButton.addEventListener('click', () => { recognition.stop(); });

        //recognition.addEventListener('result', (event) => {
        //    const result = event.results[event.results.length - 1][0].transcript;
        //    resultElement.textContent = result;
        //});

            var startButton = document.getElementById('start');
            var stopButton = document.getElementById('stop');
            var submitButton = document.getElementById('submit');
            var resultElement = document.getElementById('result');
            var messageDiv = document.getElementById('withdrawmessage');

            var recognition = new webkitSpeechRecognition();

            recognition.lang = window.navigator.language;
            recognition.interimResults = true;

            startButton.addEventListener('click', () => { recognition.start(); });
            stopButton.addEventListener('click', () => { recognition.stop(); });

            submitButton.addEventListener('click', () => {
                // Check if the input is a number
                var inputValue = resultElement.value.trim();
                if (!isNaN(inputValue)) {
                    var dots = 0;
                    messageDiv.innerHTML = "Currently Withdrawing" + ".".repeat(dots);
                    var dotAnimation = setInterval(function () {
                        messageDiv.innerHTML = "Currently Withdrawing" + ".".repeat(dots);
                        dots = (dots + 1) % 4; // 4 is the number of dots, adjust as needed
                    }, 200); // Adjust the interval as needed

                    // Simulate withdrawal process for 3 seconds
                    setTimeout(function () {
                        clearInterval(dotAnimation); // Stop the dot animation
                        // Display "Successful Withdrawal" message
                        messageDiv.innerHTML = "Successful Withdrawal";
                        // Redirect to Feedback after successful withdrawal
                        window.location.href = 'Feedback.html'; // Replace 'Feedback.html' with your desired page
                    }, 3000); // Adjust the delay as needed
                } else {
                    // Display error message if input is not a number
                    messageDiv.innerHTML = "Error: Please enter a valid number.";
                }
            });

            recognition.addEventListener('result', (event) => {
                const result = event.results[event.results.length - 1][0].transcript;
                resultElement.textContent = result;
            });
    </script>

   @* <script>
        function withdraw(amount) {
            var withdrawForm = document.getElementById("withdrawForm");
            var messageDiv = document.getElementById("withdrawmessage");

            // Display "Currently Withdrawing..." message with animated dots
            var dots = 0;
            var dotAnimation = setInterval(function () {
                messageDiv.innerHTML = "Currently Withdrawing" + ".".repeat(dots);
                dots = (dots + 1) % 4; // 4 is the number of dots, adjust as needed
            }, 200); // Adjust the interval as needed

            // Delay for 3 seconds
            setTimeout(function () {
                clearInterval(dotAnimation); // Stop the dot animation
                // Display "Successful Withdrawal" message
                messageDiv.innerHTML = "Successful Withdrawal";

                // Delay for another 3 seconds
                setTimeout(function () {
                    // Set the withdrawal amount
                    document.getElementById('withdrawAmount').value = amount;
                    // Submit the withdrawal form
                    withdrawForm.submit();
                }, 3000);
            }, 3000);
        }

        // JavaScript to show the message div if there's a message
        window.onload = function () {
            var messageDiv = document.getElementById("withdrawmessage");
            if (messageDiv.innerHTML.trim() !== '') {
                messageDiv.style.display = "block"; // Show the message if it's not empty
            }
        };

        window.addEventListener('beforeunload', function (e) {
            // Clear TempData when leaving the page
        @if (TempData["WSuccessMsg"] != null)
        {
            TempData["WSuccessMsg"] = null;
        }
        @if (TempData["WErrorMsg"] != null)
        {
            TempData["WErrorMsg"] = null;
        }
            });
    </script>*@
</body>
</html>

